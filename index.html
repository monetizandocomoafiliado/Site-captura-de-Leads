<!-- Bot√£o do grupo (mesmo dom√≠nio, sem target) -->
<a id="joinGroup" 
   href="https://chat.whatsapp.com/D0dlurxHdm0BXP3BKyqbvt" 
   class="group-button">
  üîó ENTRAR NO GRUPO EXCLUSIVO
</a>

<script>
  (function () {
    var INVITE = 'D0dlurxHdm0BXP3BKyqbvt'; // seu c√≥digo do grupo
    var GROUP_HTTPS = 'https://chat.whatsapp.com/' + INVITE;
    var ANDROID_INTENT =
      'intent://chat.whatsapp.com/' + INVITE +
      '#Intent;scheme=https;package=com.whatsapp;' +
      'S.browser_fallback_url=' + encodeURIComponent(GROUP_HTTPS) + ';end';

    var ua = navigator.userAgent || '';
    var isAndroid = /Android/i.test(ua);
    var isIOS = /iPhone|iPad|iPod/i.test(ua);
    var isIG = /Instagram/i.test(ua);

    function openWhatsApp() {
      var t = setTimeout(function () { location.href = GROUP_HTTPS; }, 1200);
      if (isAndroid) {
        location.href = ANDROID_INTENT; // Chrome Intent com fallback controlado
      } else {
        location.href = GROUP_HTTPS;     // iOS/desktop (universal link)
      }
      document.addEventListener('visibilitychange', function onVis() {
        if (document.hidden) clearTimeout(t);
        document.removeEventListener('visibilitychange', onVis);
      });
    }

    // 1) Se carregou com hash #open fora do Instagram: abrir WhatsApp automaticamente
    if (!(isIG && isAndroid) && location.hash === '#open') {
      // limpa o hash para n√£o re-disparar em futuros carregamentos
      history.replaceState(null, '', location.pathname + location.search);
      openWhatsApp();
    }

    // 2) Clique no bot√£o: tratar Instagram/Android sem pedir a√ß√£o manual
    document.getElementById('joinGroup')?.addEventListener('click', function (e) {
      e.preventDefault();

      if (isAndroid && isIG) {
        // For√ßa sa√≠da do WebView para o navegador padr√£o, mantendo o mesmo dom√≠nio/URL
        var a = document.createElement('a');
        a.href = location.pathname + location.search + '#open'; // mesma URL com hash
        a.setAttribute('download', 'open'); // "download hack" para abrir no navegador externo
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
        return;
      }

      // Fora do Instagram, abrir app normalmente com fallback
      openWhatsApp();
    });
  })();
</script>
